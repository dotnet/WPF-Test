<?xml version="1.0"?>
<INIT
    Class="RenderingTest3D"
    LogFilePrefix="MaterialGroupTest"

    BackgroundColor="255,0,0,0"
    WindowWidth="300"
    WindowHeight="200"

    TextureLookUpTolerance="0.5"
    SilhouetteEdgeTolerance="0.7"
    DefaultColorTolerance="0,4,4,4"

    Camera="PerspectiveDefault"
    Mesh="FrontAndBack"
    Material="Group"
    BackMaterial="Group"
    Light="WhiteDirectionalNegZ"

    SaveExpectedZBuffer="false"
    SaveDiffZBuffer="false"
    SaveDiffFrameBuffer="false"
    LogRendererPerformance="true"
    >

    <!--
        Test combinations of Source-Over and Additive Materials.
        Emissive and Specular can be treated as identical (they are both additive).

        The last DiffuseMaterial in the set will overwrite anything previously composited.
        Therefore, I will use a transparent DiffuseMaterial in most of those cases to make sure
        that the underlying materials are still rendered.
    -->

    <VARIATION
        Material0Type="Diffuse"
        Material0="255,40,40,40"
        Material1Type="Specular"
        Material1="255,255,255,255"
        Material1SpecularPower="75"
        BackMaterial0Type="Diffuse"
        BackMaterial0="255,0,255,0"
        BackMaterial1Type="Emissive"
        BackMaterial1="255,255,0,0"
        Description="D + S (front) - D + E (back)"
        />
    <VARIATION
        Light="WhiteAmbient"
        Material0Type="Diffuse"
        Material0="255,40,40,40"
        Material1Type="Specular"
        Material1="255,255,255,255"
        Material1SpecularPower="75"
        BackMaterial0Type="Specular"
        BackMaterial0="255,255,255,255"
        BackMaterial0SpecularPower="75"
        BackMaterial1Type="Diffuse"
        BackMaterial1="window.png"
        Description="D + S (front) - S + D (back) - AmbientLight"
        />
    <VARIATION
        Material0Type="Diffuse"
        Material0="255,40,40,40"
        Material1Type="Diffuse"
        Material1="window.png"
        BackMaterial0Type="Emissive"
        BackMaterial0="255,0,255,0"
        BackMaterial1Type="Emissive"
        BackMaterial1="255,255,0,0"
        Description="D + D (front) - E + E (back)"
        />
    <VARIATION
        Mesh="BackAndFront"
        Material0Type="Diffuse"
        Material0="255,40,40,40"
        Material1Type="Diffuse"
        Material1="window.png"
        BackMaterial0Type="Emissive"
        BackMaterial0="255,0,255,0"
        BackMaterial1Type="Specular"
        BackMaterial1="255,255,0,0"
        BackMaterial1SpecularPower="40"
        Description="D + D (front) - E + S (back) - BackMaterials shouldn't write to z-buffer"
        />
    <VARIATION
        Material0Type="Emissive"
        Material0="255,255,0,0"
        Material1Type="Diffuse"
        Material1="window.png"
        BackMaterial0Type="Emissive"
        BackMaterial0="255,255,0,0"
        BackMaterial1Type="Specular"
        BackMaterial1="255,0,255,255"
        BackMaterial1SpecularPower="75"
        Description="E + D (front) - E + S (back)"
        />
    <VARIATION
        Material0Type="Specular"
        Material0="VisualBrushButton"
        Material0SpecularPower="40"
        Material1Type="Specular"
        Material1="check.bmp"
        Material1SpecularPower="40"
        BackMaterial0Type="Specular"
        BackMaterial0="255,255,255,255"
        BackMaterial0SpecularPower="75"
        BackMaterial1Type="Diffuse"
        BackMaterial1="window.png"
        Description="S + S (front) - S + D (back)"
        />

    <VARIATION
        Material0Type="Specular"
        Material0="255,255,0,0"
        Material0SpecularPower="40"
        Material1Type="Specular"
        Material1="127,0,255,0"
        Material1SpecularPower="80"
        BackMaterial0Type="Emissive"
        BackMaterial0="255,0,0,255"
        BackMaterial1Type="Emissive"
        BackMaterial1="127,0,255,0"
        Description="S + S (front) - E + E (back) - transparency on second material"
        />

    <VARIATION
        Material0Type="Diffuse"
        Material0="cars.bmp"
        Material1Type="Diffuse"
        Material1="LinearGradientBrush 255,0,127,0 255,0,64,127 55"
        Material2Type="Diffuse"
        Material2="DrawingBrushText"
        Material3Type="Diffuse"
        Material3="RadialGradientBrush 255,0,127,0 255,0,64,127"
        Material4Type="Diffuse"
        Material4="255,255,0,255"
        BackMaterial0Type="Specular"
        BackMaterial0="cars.bmp"
        BackMaterial0SpecularPower="100"
        BackMaterial1Type="Emissive"
        BackMaterial1="LinearGradientBrush 255,0,127,0 255,0,64,127 55"
        BackMaterial2Type="Emissive"
        BackMaterial2="DrawingBrushText"
        BackMaterial3Type="Specular"
        BackMaterial3="RadialGradientBrush 255,0,127,0 255,0,64,127"
        BackMaterial3SpecularPower="200"
        BackMaterial4Type="Diffuse"
        BackMaterial4="255,255,255,0"
        Description="5x D (front) - 4x E/S + 1x D (back) - should only see the solid DiffuseMaterial on top"
        />
    <VARIATION
        Material0="Group"
        Material00="Group"
        Material000="Group"
        Material0000="Group"
        Material00000Type="Specular"
        Material00000="check.bmp"
        Material00000SpecularPower="100"
        BackMaterial0="Group"
        BackMaterial00="Group"
        BackMaterial000="Group"
        BackMaterial0000="Group"
        BackMaterial00000="Group"
        BackMaterial000000="Group"
        BackMaterial0000000Type="Diffuse"
        BackMaterial0000000="LinearGradientBrush 255,255,0,255 255,255,255,0 45"
        Description="S (front) - D (back) - Deep group structure"
        />
    <VARIATION
        Material0Type="Emissive"
        Material0="255,64,0,0"
        Material1Type="Emissive"
        Material1="255,0,0,64"
        Material2Type="Emissive"
        Material2="255,0,64,0"
        Material3Type="Emissive"
        Material3="255,64,0,0"
        Material4Type="Emissive"
        Material4="255,0,64,0"
        BackMaterial0Type="Specular"
        BackMaterial0="255,0,0,64"
        BackMaterial0SpecularPower="100"
        BackMaterial1Type="Specular"
        BackMaterial1="255,0,64,0"
        BackMaterial1SpecularPower="100"
        BackMaterial2Type="Specular"
        BackMaterial2="255,64,0,0"
        BackMaterial2SpecularPower="100"
        BackMaterial3Type="Specular"
        BackMaterial3="255,0,64,0"
        BackMaterial3SpecularPower="100"
        BackMaterial4Type="Specular"
        BackMaterial4="255,0,0,64"
        BackMaterial4SpecularPower="100"
        Description="5x E (front) - 5x S (back) - Everything should blend"
        />

    <VARIATION
        Material0Type="Emissive"
        Material0="127,40,40,40"
        Material1Type="Emissive"
        Material1="127,255,0,0"
        Material2Type="Emissive"
        Material2="64,0,255,0"
        Material3Type="Emissive"
        Material3="127,0,0,255"
        BackMaterial0Type="Diffuse"
        BackMaterial0="127,40,40,40"
        BackMaterial1Type="Diffuse"
        BackMaterial1="127,255,0,0"
        BackMaterial2Type="Diffuse"
        BackMaterial2="64,0,255,0"
        BackMaterial3Type="Diffuse"
        BackMaterial3="127,0,0,255"
        Description="4x E (front) - 4x D (back) - transparency"
        />
    <VARIATION
        Material0Type="Diffuse"
        Material0="127,40,40,40"
        Material1Type="Emissive"
        Material1="127,255,0,0"
        Material2Type="Emissive"
        Material2="64,0,255,0"
        Material3Type="Emissive"
        Material3="127,0,0,255"
        BackMaterial0Type="Diffuse"
        BackMaterial0="127,40,40,40"
        BackMaterial1Type="Diffuse"
        BackMaterial1="127,255,0,0"
        BackMaterial2Type="Diffuse"
        BackMaterial2="64,0,255,0"
        BackMaterial3Type="Diffuse"
        BackMaterial3="127,0,0,255"
        Description="1x D + 3x E (front) - 4x D (back) - transparency"
        />
    <VARIATION
        Mesh="BackAndFront"
        Material0Type="Diffuse"
        Material0="127,40,40,40"
        Material1Type="Emissive"
        Material1="127,255,0,0"
        Material2Type="Emissive"
        Material2="64,0,255,0"
        Material3Type="Emissive"
        Material3="127,0,0,255"
        BackMaterial0Type="Diffuse"
        BackMaterial0="127,40,40,40"
        BackMaterial1Type="Diffuse"
        BackMaterial1="127,255,0,0"
        BackMaterial2Type="Diffuse"
        BackMaterial2="64,0,255,0"
        BackMaterial3Type="Diffuse"
        BackMaterial3="127,0,0,255"
        Description="1x D + 3x E (front) - 4x D (back) - transparency, switch rendering order"
        />

    <VARIATION
        Material0Type="Diffuse"
        Material0="check.bmp"
        Material1Type="Emissive"
        Material1="255,100,0,0"
        Material2Type="Specular"
        Material2="255,0,150,150"
        Material2SpecularPower="100"
        BackMaterial0Type="Diffuse"
        BackMaterial0="check.bmp"
        BackMaterial1Type="Specular"
        BackMaterial1="255,0,150,150"
        BackMaterial1SpecularPower="40"
        BackMaterial2Type="Emissive"
        BackMaterial2="255,100,0,0"
        Description="D + E + S (front) - D + S + E (back)"
        />
    <VARIATION
        Material0Type="Diffuse"
        Material0="check.bmp"
        Material1="Group"
        Material10Type="Emissive"
        Material10="255,100,0,0"
        Material11Type="Specular"
        Material11="255,0,150,150"
        Material11SpecularPower="100"
        BackMaterial0="Group"
        BackMaterial00Type="Diffuse"
        BackMaterial00="check.bmp"
        BackMaterial01Type="Specular"
        BackMaterial01="255,0,150,150"
        BackMaterial01SpecularPower="40"
        BackMaterial1Type="Emissive"
        BackMaterial1="255,100,0,0"
        Description="D + ( E + S ) (front) - ( D + S ) + E (back)"
        />
    <VARIATION
        Material0Type="Diffuse"
        Material0="255,0,0,200"
        Material1="Group"
        Material10Type="Emissive"
        Material10="255,100,0,0"
        Material11Type="Specular"
        Material11="255,0,150,0"
        Material11SpecularPower="100"
        Material2Type="Diffuse"
        Material2="window.png"
        BackMaterial0Type="Emissive"
        BackMaterial0="255,100,0,0"
        BackMaterial1="Group"
        BackMaterial10Type="Diffuse"
        BackMaterial10="window.png"
        BackMaterial11Type="Specular"
        BackMaterial11="255,0,150,0"
        BackMaterial11SpecularPower="40"
        Description="D + ( E + S ) + D (front) - E + ( D + S ) (back)"
        />

    <VARIATION
        Material0Type="Diffuse"
        Material0="VisualBrush3D"
        Material1Type="Specular"
        Material1="255,180,0,180"
        Material1SpecularPower="85"
        Material2Type="Emissive"
        Material2="255,0,127,0"
        Material3Type="Diffuse"
        Material3="window.png"
        BackMaterial0="Group"
        BackMaterial00Type="Diffuse"
        BackMaterial00="check.bmp"
        BackMaterial01Type="Emissive"
        BackMaterial01="255,0,127,0"
        BackMaterial02Type="Specular"
        BackMaterial02="255,180,0,180"
        BackMaterial02SpecularPower="85"
        BackMaterial1Type="Diffuse"
        BackMaterial1="window.png"
        Description="D + S + E + D(t) (front) - (D + E + S) + D(t) (back)"
        />

    <VARIATION
        Light="WhiteSpot"
        Material0Type="Diffuse"
        Material0="LinearGradientBrush 255,128,0,128 255,128,128,0 45"
        Material1Type="Emissive"
        Material1="255,0,64,0"
        Material2Type="Specular"
        Material2="check.bmp"
        Material2SpecularPower="85"
        BackMaterial0Type="Diffuse"
        BackMaterial0="VisualBrush3D"
        BackMaterial1Type="Specular"
        BackMaterial1="255,180,0,180"
        BackMaterial1SpecularPower="85"
        BackMaterial2Type="Emissive"
        BackMaterial2="255,0,127,0"
        Description="D + E + S (front) - D + S + E (back) - SpotLight"
        />

    <VARIATION
        Light="NonWhiteDirectionalNegZ"
        Material0Type="Diffuse"
        Material0="LinearGradientBrush 255,128,0,128 255,128,128,0 45"
        Material1Type="Specular"
        Material1="cars.bmp"
        Material1SpecularPower="85"
        Material2Type="Emissive"
        Material2="255,0,64,0"
        BackMaterial0Type="Diffuse"
        BackMaterial0="VisualBrush3D"
        BackMaterial1Type="Emissive"
        BackMaterial1="255,0,127,0"
        BackMaterial2Type="Specular"
        BackMaterial2="255,180,0,180"
        BackMaterial2SpecularPower="85"
        Description="D + S + E (front) - D + E + S (back) - non-white DirectionalLight"
        />

    <!-- Texture Blend on edge in following Variation can not be filtered with Tolerance buffer.
    Reducing general tolerance here to compensate. -->    
    <VARIATION
        Light="WhiteDirectionalNegZ"
        Camera="PerspectiveRotate45"
        Mesh="Spiral 2 20 1.5 2.0"
        Material0Type="Diffuse"
        Material0="LinearGradientBrush 255,128,0,128 255,128,128,0 0"
        Material1Type="Emissive"
        Material1="255,0,0,66"
        Material2Type="Specular"
        Material2="cars.bmp"
        Material2SpecularPower="40"
        BackMaterial0Type="Diffuse"
        BackMaterial0="VisualBrush3D"
        BackMaterial1Type="Specular"
        BackMaterial1="255,180,0,180"
        BackMaterial1SpecularPower="40"
        BackMaterial2Type="Emissive"
        BackMaterial2="255,0,64,0"
        Description="D + E + S (front) - D + S + E (back) - DirectionalLight"
        
        DefaultColorTolerance="0,4,32,32"
        NumAllowableMismatches="40"
        VScanToleranceFile="MaterialGroup_ToleranceProfile.xml"
        />	
</INIT>